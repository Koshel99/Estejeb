{% extends 'base.html' %}
{% comment %} templates/volunteers/volunteer_profile.html {% endcomment %}

{% block content %}
  <div class="page-header">
    <h1>{{ volunteer_profile.user.username }}'s Volunteer Profile</h1>
  </div>

  <div class="profile-info">
    <h2>Personal Information</h2>
    <p><strong>Name:</strong> {{ volunteer_profile.user.first_name }} {{ volunteer_profile.user.last_name }}</p>
    <p><strong>Email:</strong> {{ volunteer_profile.user.email }}</p>

    {% if volunteer_profile.bio %}
      <p><strong>Bio:</strong> {{ volunteer_profile.bio }}</p>
    {% else %}
      <p><strong>Bio:</strong> Not provided</p>
    {% endif %}
  </div>

  <div class="profile-photo">
    <h2>Profile Picture</h2>
    {% if volunteer_profile.photo %}
      <img src="{{ volunteer_profile.photo.url }}" alt="Profile Picture" class="profile-pic" />
    {% else %}
      <p>No profile picture uploaded.</p>
    {% endif %}
  </div>

  <div class="profile-resume">
    <h2>Resume</h2>
    {% if volunteer_profile.resume %}
      <a href="{{ volunteer_profile.resume.url }}" target="_blank">Download Resume</a>
    {% else %}
      <p>No resume uploaded.</p>
    {% endif %}
  </div>

  <div class="profile-opportunities">
    <h2>Applied Opportunities</h2>
    {% if volunteer_profile.applications.exists %}
      <ul>
        {% for application in volunteer_profile.applications.all %}
          <li>
            <a href="{% url 'opportunity-detail' application.opportunity.id %}">
              {{ application.opportunity.title }} at {{ application.opportunity.organization.name }}
            </a> - Status: {{ application.status }}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>You have not applied to any opportunities yet.</p>
    {% endif %}
  </div>

  <div class="profile-actions">
    {% if request.user == volunteer_profile.user %}
      <a href="{% url 'volunteer-edit' volunteer_profile.id %}" class="btn btn-edit">Edit Profile</a>
      <form action="{% url 'volunteer-delete' volunteer_profile.id %}" method="post" style="display:inline;">
        {% csrf_token %}
        <button type="submit" class="btn btn-delete" onclick="return confirm('Are you sure you want to delete your profile? This cannot be undone.')">Delete Profile</button>
      </form>
    {% endif %}
    <a href="{% url 'home' %}" class="btn btn-back">Back to Home</a>
  </div>
{% endblock %}
