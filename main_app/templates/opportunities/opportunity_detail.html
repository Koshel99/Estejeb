{% extends 'base.html' %}

{% comment %} main_app/templates/opportunities/opportunity_detail.html {% endcomment %}

{% block content %}
  <h1>{{ opportunity.title }}</h1>

  <p><strong>Description:</strong> {{ opportunity.description }}</p>
  <p><strong>Location:</strong> {{ opportunity.location }}</p>
  <p><strong>Age Requirement:</strong> {{ opportunity.age_requirement }}+</p>
  <p><strong>Volunteers Needed:</strong> {{ opportunity.num_volunteers_needed }}</p>

  {% if opportunity.certification_required %}
    <p><strong>Certifications Required:</strong> {{ opportunity.certifications_list }}</p>
  {% endif %}

  {% if user.is_authenticated %}
    {% if user == opportunity.organization.user %}
      <!-- If the user is the owner of the organization -->
      <a href="{% url 'applicants-list' opportunity.id %}">View Applicants</a>
    {% elif user.volunteerprofile %}
      <!-- If the user is a volunteer -->
      <form method="post" action="{% url 'apply-opportunity' opportunity.id %}">
        {% csrf_token %}
        <button type="submit">Apply to This Opportunity</button>
      </form>
    {% endif %}
  {% else %}
    <p><a href="{% url 'login' %}">Log in</a> to apply.</p>
  {% endif %}

  <br><a href="{% url 'home' %}">‚Üê Back to Home</a>
{% endblock %}
