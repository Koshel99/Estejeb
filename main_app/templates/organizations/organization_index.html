{% extends 'base.html' %}

{% comment %} main_app/templates/organizations/organization_index.html {% endcomment %}

{% block content %}
  <h1>All Organizations</h1>

  {% if organizations %}
    <div class="organization-list">
      {% for organization in organizations %}
        <div class="organization-card">
          <h3>{{ organization.name }}</h3>
          <p><strong>Description:</strong> {{ organization.description|truncatewords:20 }}</p>
          <p><strong>Location:</strong> {{ organization.location }}</p>
          <p><strong>Website:</strong> <a href="{{ organization.website }}" target="_blank">{{ organization.website }}</a></p>

          <!-- Link to organization profile page -->
          <a href="{% url 'organization-profile' organization.id %}">View Details</a>

          <!-- Conditional link for authenticated users to create a cause (opportunity) if they belong to the organization -->
          {% if user.is_authenticated %}
            <a href="{% url 'create-opportunity' organization.id %}">Create Cause (Opportunity)</a>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>No organizations available at the moment.</p>
  {% endif %}

  <br><a href="{% url 'home' %}">‚Üê Back to Home</a>
{% endblock %}
